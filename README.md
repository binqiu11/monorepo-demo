# A1 Project

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªåŸºäº Pnpm çš„å‰ç«¯ monorepo é¡¹ç›®ï¼ŒåŒ…å«ä¸‰ä¸ªä¸»è¦éƒ¨åˆ†ï¼š

packages/a1 - a1 ä¸»åº”ç”¨ï¼ˆJavaScript + Vue 3ï¼‰

packages/rmax - Reward å­åº”ç”¨/ç»„ä»¶åº“ï¼ˆTypeScript + Vue 3ï¼‰

packages/shared - å…±äº«ä»£ç åº“ï¼ˆå·¥å…·å‡½æ•°ã€å…¬å…±ç»„ä»¶ã€ç±»å‹å®šä¹‰ï¼‰

## ğŸ—ï¸ Why Monorepoï¼Ÿ

- shared åŒ…æä¾›å¯å¤ç”¨çš„ç»„ä»¶ã€å·¥å…·å‡½æ•°å’Œç±»å‹å®šä¹‰

- ç¡®ä¿ UI å’ŒåŠŸèƒ½çš„ä¸€è‡´æ€§

- packages/rmax ç±»å‹å®‰å…¨

- ç»Ÿä¸€çš„å¼€å‘ã€æ„å»ºã€æµ‹è¯•æµç¨‹

- ç›¸å…³åŠŸèƒ½å¯ä»¥åŒæ—¶å¼€å‘ã€æµ‹è¯•ã€å‘å¸ƒ

## ä¾èµ–å…³ç³»å›¾

```text
ä¾èµ–å±‚æ¬¡ç»“æ„ï¼š
    Layer 0: Vue 3 Runtime (æ‰€æœ‰é¡¹ç›®å…±äº«)
        â”‚
        â”œâ”€â”€ Layer 1: shared åŒ… (åŸºç¡€è®¾æ–½)
        â”‚   â”œâ”€â”€ å…¬å…±ç»„ä»¶ (Button, Modal, Inputç­‰)
        â”‚   â”œâ”€â”€ å·¥å…·å‡½æ•° (formatters, validatorsç­‰)
        â”‚   â””â”€â”€ ç»„åˆå¼å‡½æ•° (useLocalStorage, useThemeç­‰)
        â”‚
        â”œâ”€â”€ Layer 2: rmax (åŠŸèƒ½æ¨¡å—)
        â”‚   â”œâ”€â”€ ä¸šåŠ¡ç»„ä»¶ (Reward ç›¸å…³)
        â”‚   â”œâ”€â”€ ä¸šåŠ¡é€»è¾‘ (ç‰¹å®šåŠŸèƒ½æ¨¡å—)
        â”‚   â”œâ”€â”€ è·¯ç”±é…ç½® (ä¾›Project Aä½¿ç”¨)
        â”‚   â””â”€â”€ TypeScript ç±»å‹ (å®Œæ•´ç±»å‹å®‰å…¨)
        â”‚
        â””â”€â”€ Layer 3: a1 (ä¸»åº”ç”¨)
            â”œâ”€â”€ é¡µé¢ç»„ä»¶ (å„ä¸šåŠ¡é¡µé¢)
            â”œâ”€â”€ åº”ç”¨è·¯ç”± (æ•´åˆ rmax è·¯ç”±)
            â”œâ”€â”€ çŠ¶æ€ç®¡ç† (å…¨å±€çŠ¶æ€)
            â””â”€â”€ åº”ç”¨å…¥å£ (é›†æˆæ‰€æœ‰åŠŸèƒ½)
```

## æµç¨‹

```
æ ¹ç›®å½•å®‰è£…ä¾èµ– -> å¯åŠ¨ a1 -> æ‰“åŒ…å¹¶ç›‘å¬ rmax/shared -> ä¿®æ”¹ rmax/shared -> åˆ·æ–° a1
```

## é¡¹ç›®ç›®å½•

```text
monorepo/
â”œâ”€â”€ ğŸ“ packages/                   # æ‰€æœ‰å­åŒ…ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“ a1/                     # ä¸»åº”ç”¨ (JavaScript)
â”‚   â”‚   â”œâ”€â”€ ğŸ“ src/                # æºç ç›®å½•
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ ...             # a1 å¼€å‘èµ„æº
â”‚   â”‚   â”‚   â”œâ”€â”€ App.vue            # æ ¹ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ main.js            # åº”ç”¨å…¥å£
â”‚   â”‚   â”œâ”€â”€ index.html             # HTML æ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ vite.config.js         # Vite é…ç½®
â”‚   â”‚   â”œâ”€â”€ ã€‚ã€‚ã€‚
â”‚   â”‚   â””â”€â”€ package.json           # ä¾èµ–é…ç½®
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ rmax/                   # rmax å­åº”ç”¨/ç»„ä»¶åº“ (TypeScript)
â”‚   â”‚   â”œâ”€â”€ ğŸ“ src/                # æºç ç›®å½•
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ ...             # rmax å¼€å‘èµ„æº
â”‚   â”‚   â”‚   â””â”€â”€ index.ts           # rmax åº“å…¥å£æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ vite.config.ts         # Vite é…ç½®ï¼ˆTypeScriptï¼‰æ”¯æŒæŒ‰éœ€åŠ è½½å’Œ tree-shaking
â”‚   â”‚   â”œâ”€â”€ package.json           # ä¾èµ–é…ç½®
â”‚   â”‚   â”œâ”€â”€ ...
â”‚   â”‚   â””â”€â”€ tsconfig.json          # TypeScript é…ç½®
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ shared/                 # å…±äº«ä»£ç åº“
â”‚       â”œâ”€â”€ ğŸ“ components/         # å…¬å…± UI ç»„ä»¶
|       |   â””â”€â”€ index.js           # å¯¼å‡ºå…¥å£
â”‚       â”œâ”€â”€ ...                    # å…¶ä»–
â”‚       â””â”€â”€ package.json           # ä¾èµ–é…ç½®ï¼ˆpeerDependenciesï¼‰ï¼Œæ— éœ€å•ç‹¬æ„å»º
â”‚
â”œâ”€â”€ package.json                 # æ ¹ç›®å½•é…ç½®ï¼ˆå¼€å‘å·¥å…·ï¼‰
â”œâ”€â”€ pnpm-workspace.yaml          # pnpm workspace é…ç½®
â”œâ”€â”€ nodemon.json                 # ç›‘å¬ rmaxã€shared æ›´æ”¹å¹¶é‡æ–°æ‰“åŒ…åˆ·æ–°
â””â”€â”€ ...                          # å…¶ä»–
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

```shell
# 1. å®‰è£…æ ¹ç›®å½•çš„å¼€å‘å·¥å…·ä¾èµ–
# 2. é€’å½’å®‰è£…æ‰€æœ‰ workspace åŒ…çš„ä¾èµ–
# 3. å»ºç«‹åŒ…ä¹‹é—´çš„ç¬¦å·é“¾æ¥
pnpm run init

# 1. æ„å»º rmax
# 2. å¯åŠ¨ rmax çš„æ–‡ä»¶ç›‘å¬
# 3. å¯åŠ¨ a1 å¼€å‘æœåŠ¡
pnpm dev

# 1. æ„å»º rmax
# 2. æ„å»º a1
pnpm build

# æ·»åŠ ä¾èµ–
# åœ¨æ ¹ç›®å½•æ·»åŠ å¼€å‘å·¥å…·
pnpm add -D <package-name>

# åœ¨ a1 ä¸­æ·»åŠ ä¾èµ–
cd packages/a1
pnpm add <package-name>

# åœ¨ rmax ä¸­æ·»åŠ ä¾èµ–
cd packages/rmax
pnpm add <package-name>

# åœ¨ shared ä¸­æ·»åŠ  peer ä¾èµ–
cd packages/shared
pnpm add --save-peer <package-name>
```
